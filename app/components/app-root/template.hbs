{{#if flashMessages.queue}}
	<aside class="FlashMessages">
		{{#each flashMessages.queue as |flash|}}
			{{flash-message flash=flash}}
		{{/each}}
	</aside>
{{/if}}

{{aside-left
		isAuthenticated=session.isAuthenticated
		userChannel=session.currentUser.channels.firstObject
		toggleModal=(action "toggleModal")}}

<main class="SiteMain">
	{{play-random-channel keyboardActivated=true}}
	{{yield}}
</main>

<aside class="Aside Aside--right">
	{{x-playback keyboardActivated=true}}
</aside>

{{#if isShowingModal}}
	{{#modal-dialog onClose=(action "toggleModal")}}
		<div class="Sections">
			<section class="Section">
				<div class="Manchet">
					<h2><small>Add a </small>new track<small> to your radio</small></h2>
				</div>
				<div class="Container">
					{{track-form-add
							initialUrl=url
							onSubmit=(action "saveTrack")
							onCancel=(action "toggleModal")}}
					<div>
						Do you want to add tracks directly from YouTube?<br>
						&rarr;<span {{action "toggleModal"}}>{{link-to "Get the bookmarklet" "bookmarklet" class="Btn Btn--text"}}</span>
					</div>
				</div>
			</section>
		</div>
	{{/modal-dialog}}
{{/if}}
